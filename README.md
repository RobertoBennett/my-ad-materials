# My Ad Materials

Мощная система управления рекламными баннерами с аналитикой, таргетингом и REST API.

## Описание

Профессиональная система для создания, управления и отслеживания эффективности рекламных кампаний. Плагин превращает любой контент WordPress в полноценные рекламные баннеры с детальной аналитикой показов, кликов и конверсий.

## Основные возможности

-   **Управление баннерами**: Создание рекламных материалов с изображениями, заголовками и ссылками.
-   **Таргетинг по категориям**: Разделение рекламы на категории (Общая, Отношения, Здоровье, Образ жизни, 18+).
-   **Привязка к сайтам**: Ограничение показа материалов только на определенных сайтах.
-   **REST API**: Полноценное API для получения рекламы и отправки статистики.
-   **Детальная аналитика**: Отслеживание показов, кликов, расчет CTR в реальном времени.
-   **Автоматические баннеры**: Генерация баннеров на основе контента, если не указано изображение.
-   **Безопасное удаление**: Полная очистка всех связанных данных при удалении материалов.
-   **Массовые операции**: Пакетное управление материалами и сайтами.

## Установка

1.  Загрузите файл `my-ad-materials.php` в папку `/wp-content/plugins/`.
2.  Активируйте плагин через меню 'Плагины' в админ-панели WordPress.
3.  Плагин автоматически создаст необходимые таблицы в базе данных.

## Использование

### 1. Создание рекламных материалов

1.  Перейдите в «Реклама» → «Добавить материал»
2.  Заполните обязательные поля:
    -   **Заголовок**: Название рекламной кампании
    -   **Описание**: Текст рекламного объявления
    -   **Миниатюра**: Изображение баннера
    -   **Ссылка**: URL для перехода
    -   **Категория**: Тематическая категория
    -   **Сайты**: Ограничение показа (опционально)

### 2. Управление сайтами

1.  Перейдите в «Реклама» → «Сайты для рекламы»
2.  Добавьте сайты, где будет размещаться реклама
3.  Каждому сайту присваивается уникальный ID для использования в коде вставки

### 3. Просмотр статистики

1.  Перейдите в «Реклама» → «Статистика»
2.  Анализируйте эффективность кампаний по показам, кликам и CTR

### 4. Встраивание на сайты

Используйте предоставленный JavaScript код для вставки рекламных блоков:

```html
<script>
window.adSiteId = "ID_ВАШЕГО_САЙТА";
</script>
<script src="URL_ВАШЕГО_САЙТА/wp-content/plugins/my-ad-materials/js/ad-inline.js" 
        data-api-url="URL_ВАШЕГО_САЙТА/wp-json/custom/v1/ads"
        data-width="300px" 
        data-height="250px"
        data-category="general"
        data-auto-rotate="true"></script>
```

### 5. API Endpoints

* GET /wp-json/custom/v1/ads - Получение рекламных материалов
* POST /wp-json/custom/v1/analytics - Отправка статистики
* GET /wp-json/custom/v1/analytics/stats - Получение статистики (только для админов)

### 6. Безопасность

* Все операции защищены nonce-проверками
* Валидация входных данных
* Автоматическое резервное копирование
* Проверка прав доступа для всех операций

### Версия 1.3